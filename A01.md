# Exercise: A01 – Broken Access Control (OWASP Juice Shop)

## Objective
Understand how missing or improper authorization checks allow users to perform actions or access data beyond their intended permissions.

---

## Background
Broken Access Control occurs when applications do not properly enforce what authenticated users are allowed to do. Attackers can exploit these flaws to access other users’ data, perform unauthorized actions, or gain administrative privileges.

OWASP Juice Shop intentionally contains multiple access control weaknesses to demonstrate real-world attack scenarios.

---

## Prerequisites
- OWASP Juice Shop running locally using Docker  
- Application accessible at `http://localhost:3000`  
- Web browser with Developer Tools (Chrome / Firefox)

---

## Scenario 1: Unprotected Admin API Endpoint

### Description
Administrative backend APIs are exposed without proper role validation, allowing normal users or unauthenticated users to access sensitive configuration data.

### Steps
1. Open OWASP Juice Shop in a browser.
2. Without logging in as admin, open a new browser tab.
3. Access the following URL directly:

https://jwt.io

4. Observe the `role` claim in the payload.

### Expected Observation
Role information is exposed client-side. If the backend trusts this value, privilege escalation becomes possible.

---

## Scenario 4: Missing Function-Level Access Control

### Description
Certain application functions are accessible to all authenticated users even though they should be restricted to privileged roles.

### Steps
1. Log in as a normal user.
2. Attempt to directly access admin-only features using guessed URLs or APIs.
3. Observe server responses.

### Expected Observation
Restricted functions respond successfully, indicating missing function-level authorization.

---

## How to Fix Broken Access Control (Best Practices)
- Enforce authorization checks on **every backend request**
- Implement **Role-Based** or **Attribute-Based Access Control (RBAC / ABAC)**
- Apply **deny-by-default** policies
- Validate **object ownership** for all object references
- Add **automated access control tests** in CI/CD pipelines

---

## Key Takeaways
Access control must always be enforced on the **server side**.  
Relying on client-side checks or obscurity leads to **severe security vulnerabilities**.
